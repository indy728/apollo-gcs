[{"/Users/kylemurray/apollo-file-upload/client/src/index.js":"1","/Users/kylemurray/apollo-file-upload/client/src/App.js":"2","/Users/kylemurray/apollo-file-upload/client/src/reportWebVitals.js":"3","/Users/kylemurray/apollo-file-upload/client/src/apollo.js":"4","/Users/kylemurray/apollo-file-upload/client/src/components/apollo/index.js":"5","/Users/kylemurray/apollo-file-upload/client/src/components/apollo/mutations.gql.js":"6","/Users/kylemurray/apollo-file-upload/client/src/components/apollo/queries.gql.js":"7","/Users/kylemurray/apollo-file-upload/client/src/components/Upload/components/index.js":"8","/Users/kylemurray/apollo-file-upload/client/src/components/Upload/components/upload-form.component.js":"9","/Users/kylemurray/apollo-file-upload/client/src/components/Upload/index.js":"10","/Users/kylemurray/apollo-file-upload/client/src/components/Upload/file-form-list.upload.js":"11","/Users/kylemurray/apollo-file-upload/client/src/components/Upload/file-selector.upload.js":"12","/Users/kylemurray/apollo-file-upload/client/src/components/navigation/index.js":"13","/Users/kylemurray/apollo-file-upload/client/src/components/navigation/TopNav/index.js":"14","/Users/kylemurray/apollo-file-upload/client/src/components/Search/index.js":"15","/Users/kylemurray/apollo-file-upload/client/src/components/Search/components/Search/index.js":"16","/Users/kylemurray/apollo-file-upload/client/src/components/Search/components/Search/components/index.js":"17","/Users/kylemurray/apollo-file-upload/client/src/components/Search/components/Search/components/search-field.search.js":"18","/Users/kylemurray/apollo-file-upload/client/src/components/Search/components/Search/components/track-list.search.js":"19","/Users/kylemurray/apollo-file-upload/client/src/util/index.js":"20"},{"size":865,"mtime":1609898888036,"results":"21","hashOfConfig":"22"},{"size":3008,"mtime":1611440329048,"results":"23","hashOfConfig":"22"},{"size":362,"mtime":1609879080261,"results":"24","hashOfConfig":"22"},{"size":422,"mtime":1610131440880,"results":"25","hashOfConfig":"22"},{"size":61,"mtime":1611099599650,"results":"26","hashOfConfig":"22"},{"size":494,"mtime":1611269840229,"results":"27","hashOfConfig":"22"},{"size":552,"mtime":1611712984186,"results":"28","hashOfConfig":"22"},{"size":39,"mtime":1610421758726,"results":"29","hashOfConfig":"22"},{"size":6335,"mtime":1611271517415,"results":"30","hashOfConfig":"22"},{"size":128,"mtime":1610488735684,"results":"31","hashOfConfig":"22"},{"size":2170,"mtime":1611269823209,"results":"32","hashOfConfig":"22"},{"size":655,"mtime":1611269591969,"results":"33","hashOfConfig":"22"},{"size":43,"mtime":1611353305772,"results":"34","hashOfConfig":"22"},{"size":1999,"mtime":1611429020965,"results":"35","hashOfConfig":"22"},{"size":350,"mtime":1611365165769,"results":"36","hashOfConfig":"22"},{"size":1175,"mtime":1611441380516,"results":"37","hashOfConfig":"22"},{"size":119,"mtime":1611356878957,"results":"38","hashOfConfig":"22"},{"size":1067,"mtime":1611439345829,"results":"39","hashOfConfig":"22"},{"size":4114,"mtime":1611713469980,"results":"40","hashOfConfig":"22"},{"size":2000,"mtime":1611523804458,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"1yz7ysc",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"44"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"44"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"84","messages":"85","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/kylemurray/apollo-file-upload/client/src/index.js",[],["86","87"],"/Users/kylemurray/apollo-file-upload/client/src/App.js",[],"/Users/kylemurray/apollo-file-upload/client/src/reportWebVitals.js",[],"/Users/kylemurray/apollo-file-upload/client/src/apollo.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/apollo/index.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/apollo/mutations.gql.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/apollo/queries.gql.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/Upload/components/index.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/Upload/components/upload-form.component.js",["88","89","90"],"import { useMutation } from \"@apollo/client\";\nimport React from \"react\";\nimport {FIRESTORE_ADD, DELETE_FILE} from '../../apollo'\nimport {useForm, Controller} from 'react-hook-form'\nimport styled from 'styled-components'\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport CardContent from '@material-ui/core/CardContent';\n\nconst UploadCard = styled(Card)`\n  && {\n    background-color: ghostwhite;\n    margin: 0 20px;\n\n    &:not(:first-of-type){\n      margin-top: 20px;\n    }\n  }\n`\n\nconst getKeywords = ({title, artist, key, tags}) => {\n  const keywords = [];\n\n  // Split title by word, remove parentheses\n  title.split(' ')\n    .forEach((x) => {\n      keywords.push(x.toLowerCase().replace(/\\W+/g, ''))\n    });\n  // Split artists and split artist names by whitespace\n  artist.split(', ')\n    .map(y => y.split(' ')).flat()\n    .forEach(z => {\n      keywords.push(z.toLowerCase())\n    });\n  // Include key in keywords\n  if (key && key.length) {\n    keywords.push(key)\n  }\n  // @TODO: Include tags (ie deep house, techno, etc..)\n\n  return keywords\n}\n\nexport const UploadForm = ({metadata: {\n  title, filename, format, artist, duration, bpm, key\n}, deleteFiles}) => {\n  duration = duration || 0\n  const songLength = `${Math.floor(duration / 60)}:${Math.floor(duration % 60).toString().padStart(2, \"0\")}`\n  const [fsAdd, {loading, data, error}] = useMutation(FIRESTORE_ADD, {\n    onCompleted: (x) => {\n\n      console.log(x)\n    }\n  })\n\n  const {register, errors, handleSubmit, control} = useForm({\n    defaultValues: {\n      title: title || '',\n      filename,\n      format: format || '',\n      artist: artist || '',\n      duration: songLength,\n      bpm: bpm || '',\n      key: key || '',\n      keywords: [],\n    }\n  });\n\n  const onSubmit = values => {\n    const keywords = getKeywords(values)\n    const _artist = values.artist.toLowerCase();\n    const _title = values.title.toLowerCase();\n\n    fsAdd({variables: {entry: {...values, keywords, _artist, _title}}}).then(({data: {fsAdd: res}}) => {\n      if (!res.length) {\n        console.log('[upload-form.component] values.filename: ', values.filename)\n        deleteFiles({variables: {file: filename}})\n      }\n    })\n  }\n\n  if (loading) {\n    return <div>...Uploading...</div>\n  }\n\n  if (error) {\n    return <div>...Error...</div>\n  }\n\n  return (\n    <UploadCard>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Track information\n        </Typography>\n        <Grid container spacing={3}>\n          <Grid item xs={8}>\n            <Controller\n              control={control}\n              name=\"filename\"\n              render={(\n                {value, name},\n              ) => (\n                <TextField\n                  name={name}\n                  label=\"File name\"\n                  value={value}\n                  fullWidth\n                  InputProps={{\n                    readOnly: true,\n                  }}\n                />\n              )}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <Controller\n                control={control}\n                name=\"format\"\n                render={(\n                  {value, name},\n                ) => (\n                <TextField\n                  name={name}\n                  label=\"File format\"\n                  value={value}\n                  fullWidth\n                  InputProps={{\n                    readOnly: true,\n                  }}\n                />\n              )}\n              />\n          </Grid>\n          <Grid item xs={12}>\n            <Controller\n              control={control}\n              name=\"title\"\n              rules={{required: true}}\n              render={(\n                {onChange, value, name},\n              ) => (\n                <TextField\n                  name={name}\n                  label=\"Song title\"\n                  value={value}\n                  onChange={onChange}\n                  fullWidth\n                />\n              )}\n            />\n          </Grid>\n          <Grid item xs={12}>\n          <Controller\n              control={control}\n              name=\"artist\"\n              rules={{required: true}}\n              render={(\n                {onChange, value, name},\n              ) => (\n                <TextField\n                  name={name}\n                  label=\"Artist\"\n                  value={value}\n                  onChange={onChange}\n                  fullWidth\n                />\n              )}\n            />\n          </Grid>\n          <Grid item xs={4}>\n          <Controller\n              control={control}\n              name=\"duration\"\n              rules={{required: true}}\n              render={(\n                {value, name},\n              ) => (\n                <TextField\n                  name={name}\n                  label=\"Length\"\n                  value={value}\n                  fullWidth\n                  inputProps={{\n                    readOnly: true\n                  }}\n                />\n              )}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <Controller\n              control={control}\n              name=\"bpm\"\n              render={(\n                {onChange, value, name},\n              ) => (\n              <TextField\n                name={name}\n                label=\"BPM\"\n                value={value}\n                onChange={onChange}\n                fullWidth\n              />\n              )}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <Controller\n              control={control}\n              name=\"key\"\n              render={(\n                {onChange, value, name},\n              ) => (\n                <TextField\n                  name={name}\n                  label=\"key\"\n                  value={value}\n                  fullWidth\n                  ref={register}\n                />\n              )}\n            />\n          </Grid>\n          <Button type=\"submit\" onClick={handleSubmit(onSubmit)}>Submit</Button>\n          <Button type=\"submit\" onClick={() => deleteFiles({variables: {file: filename}})}>Remove</Button>\n      </Grid>\n      </CardContent>\n    </UploadCard>\n    )\n}","/Users/kylemurray/apollo-file-upload/client/src/components/Upload/index.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/Upload/file-form-list.upload.js",["91"],"import { useQuery, useMutation } from \"@apollo/client\";\nimport React from \"react\";\nimport {FILES_QUERY, DELETE_FILE, FIRESTORE_ADD} from '../apollo'\nimport styled from 'styled-components';\nimport {UploadForm} from './components';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\n\nconst FileUploadContainer = styled.main`\n  background-color: teal;\n  width: auto;\n  margin: 32px auto;\n\n  @media (min-width: 600px) {\n    width: 600px;\n  }\n`\n\nconst FileUploadPaper = styled(Paper)`\n  && {\n    background-color: #bbb;\n    padding-bottom: 20px;\n  }\n`\n\nconst FileFormList = () => {\n  const { data, loading, error } = useQuery(FILES_QUERY);\n  const [deleteFiles] = useMutation(DELETE_FILE, {\n    refetchQueries: [{ query: FILES_QUERY}],\n    // onCompleted: data => console.log('[Files] del_data: ', del_data)\n  })\n\n  if (loading) {\n    return <div>loading...</div>;\n  }\n  if (error) {\n    console.log(error.message)\n    return <div>error importing files</div>\n  }\n\n  console.log('[Files] data: ', data)\n\n  // const handleDelete = (file) => {\n  //   console.log('[Files] file: ', file)\n  //   if (file) {\n  //     deleteFiles({variables: {file}})\n  //   }\n  // }\n\n  return (\n    // <FileUploadContainer className=\"file-upload-container\">\n\n    // </FileUploadContainer>\n    <FileUploadContainer>\n    <FileUploadPaper className={'file-upload-paper'}>\n      <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n        Songs Upload\n      </Typography>\n      {/* <Stepper activeStep={activeStep} className={classes.stepper}>\n        {steps.map((label) => (\n          <Step key={label}>\n          <StepLabel>{label}</StepLabel>\n          </Step>\n          ))}\n        </Stepper> */}\n      <>\n           {data.files && data.files.map((metadata, i) => {\n    \n            return (\n              <UploadForm metadata={metadata} key={metadata.filename + i} deleteFiles={deleteFiles} idx={i}/>\n          )})}\n        \n      </>\n    </FileUploadPaper>\n    {/* <button onClick={() => fsAdd({variables: {entry: 'show me 69'}})}>FB TEST</button> */}\n    {/* <Copyright /> */}\n  </FileUploadContainer>\n  );\n};\n\nexport default FileFormList;\n","/Users/kylemurray/apollo-file-upload/client/src/components/Upload/file-selector.upload.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/navigation/index.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/navigation/TopNav/index.js",["92"],"import React, {useState} from 'react';\nimport styled from 'styled-components';\nimport {Link, withRouter} from 'react-router-dom';\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu';\n\nconst links = [\n  {\n    key: 'search',\n    to: '/search',\n    text: 'Track Search'\n  },\n  {\n    key: 'upload',\n    to: '/upload',\n    text: 'Upload Tracks'\n  },\n]\n\nconst StyledToolbar = styled(Toolbar)`\n  background-color: ${({theme: {background}}) => background.dark0};\n  height: 100px;\n  \n  && {\n    * {\n      font-size: 2rem;\n    }\n  }\n`\n\nconst TopNav = () => {\n  const [menuAnchor, setMenuAnchor] = useState()\n\n  const handleMenuToggle = (e) => {\n    setMenuAnchor(menuAnchor ? null : e.currentTarget)\n  }\n\n  const handleMenuClose = () => setMenuAnchor(null);\n\n  const menu = (\n    // To handle position of menu opening see:\n    // https://material-ui.com/components/menus/#menulist-composition\n    <Menu\n        id=\"simple-menu\"\n        anchorEl={menuAnchor}\n        keepMounted\n        open={Boolean(menuAnchor)}\n        onClose={handleMenuClose}\n      >\n        {links.map(({key, to, text}) => (\n          <MenuItem key={key}>\n            <Link to={to}>\n              <Typography>\n                {text}\n              </Typography>\n            </Link>\n          </MenuItem>\n        ))}\n      </Menu>\n  )\n\n  return (\n    <AppBar position=\"static\">\n      <StyledToolbar>\n        <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\" onClick={handleMenuToggle}>\n          <MenuIcon />\n          {menu}\n        </IconButton>\n        <Typography variant=\"h6\">\n          Indy's DJ Track Database\n        </Typography>\n        {/* @TODO: User / Logout */}\n      </StyledToolbar>\n    </AppBar>\n  )\n}\nexport default TopNav;","/Users/kylemurray/apollo-file-upload/client/src/components/Search/index.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/Search/components/Search/index.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/Search/components/Search/components/index.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/Search/components/Search/components/search-field.search.js",[],"/Users/kylemurray/apollo-file-upload/client/src/components/Search/components/Search/components/track-list.search.js",["93","94"],"/Users/kylemurray/apollo-file-upload/client/src/util/index.js",["95","96"],{"ruleId":"97","replacedBy":"98"},{"ruleId":"99","replacedBy":"100"},{"ruleId":"101","severity":1,"message":"102","line":3,"column":24,"nodeType":"103","messageId":"104","endLine":3,"endColumn":35},{"ruleId":"101","severity":1,"message":"105","line":52,"column":27,"nodeType":"103","messageId":"104","endLine":52,"endColumn":31},{"ruleId":"101","severity":1,"message":"106","line":59,"column":20,"nodeType":"103","messageId":"104","endLine":59,"endColumn":26},{"ruleId":"101","severity":1,"message":"107","line":3,"column":35,"nodeType":"103","messageId":"104","endLine":3,"endColumn":48},{"ruleId":"101","severity":1,"message":"108","line":3,"column":15,"nodeType":"103","messageId":"104","endLine":3,"endColumn":25},{"ruleId":"101","severity":1,"message":"109","line":78,"column":13,"nodeType":"103","messageId":"104","endLine":78,"endColumn":26},{"ruleId":"101","severity":1,"message":"110","line":79,"column":14,"nodeType":"103","messageId":"104","endLine":79,"endColumn":28},{"ruleId":"101","severity":1,"message":"111","line":15,"column":9,"nodeType":"103","messageId":"104","endLine":15,"endColumn":14},{"ruleId":"112","severity":1,"message":"113","line":52,"column":18,"nodeType":"114","messageId":"115","endLine":52,"endColumn":20},"no-native-reassign",["116"],"no-negated-in-lhs",["117"],"no-unused-vars","'DELETE_FILE' is defined but never used.","Identifier","unusedVar","'data' is assigned a value but never used.","'errors' is assigned a value but never used.","'FIRESTORE_ADD' is defined but never used.","'withRouter' is defined but never used.","'download_data' is assigned a value but never used.","'download_error' is assigned a value but never used.","'pSBCr' is assigned a value but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","no-global-assign","no-unsafe-negation"]